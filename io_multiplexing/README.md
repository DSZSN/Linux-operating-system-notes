# I/O多路复用

服务器编程模型, 客户端发来的请求服务器会产生一个进程来对其进行服务,每一个客户请求就产生一个进程来服务,然而进程不可能无限制的产生,因此为了解决大量客户端访问的问题,引入了I/O复用技术(一个进程可以同时对多个客户请求进行服务)。


IO复用的"介质"是进程(select、poll、epool,进程需要调用select、pool或epool来实现)，复用一个进程来对多个IO进行服务,虽然客户端发来的IO是并发的,但是IO所需的读写数据多数情况下是没有准备好的,因此就可以利用一个函数(select、poll或Epool)来监听IO所需的这些数据的状态,一旦IO有数据可以进行读写了,进程就来对这样的IO进行服务。


IO多路复用指内核一旦发现进程指定的一个或多个I/O条件准备读取,它就通知该进程。


## I/O多路复用适用场景

1. 当客户端处理多个描述符时(交互式输入和网络套接字),必须使用I/O复用。
2. 当客户端同时处理多个套接字时,而这种情况是可能的,但很少出现。
3. 如果TCP服务器既要监听套接字,又要处理已建立连接套接字,一般要用到I/O复用.
4. 如果服务器既要处理TCP,又要处理UDP,一般要使用I/O复用。
5. 如果服务器要处理多个服务或者多个协议,一般要使用I/O复用。

## 多进程/多线程 Vs. IO多路复用

I/O多路复用与多进程/多线程技术相比,I/O多路复用技术的最大优势是系统开销小,系统不必创建进程/线程,也不必维护这些进程/线程,从而大大减小了系统的开销。